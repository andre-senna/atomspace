FIND_PACKAGE(FLEX REQUIRED)
FIND_PACKAGE(BISON REQUIRED)

bison_target(parser parser.y "${CMAKE_CURRENT_BINARY_DIR}/parser.cc" COMPILE_FLAGS -d)
flex_target(lexer lexer.l "${CMAKE_CURRENT_BINARY_DIR}/lexer.cc")

# Avoids an annoying warning message due to a comparisson between
# signed and unsigned int in lexer.cc generated by Flex.
set_source_files_properties("${CMAKE_CURRENT_BINARY_DIR}/lexer.cc" PROPERTIES COMPILE_FLAGS -Wno-sign-compare)

ADD_LIBRARY(atomeseparser SHARED
    "${CMAKE_CURRENT_BINARY_DIR}/lexer.cc"
    "${CMAKE_CURRENT_BINARY_DIR}/parser.cc"
    AtomeseParser
)
